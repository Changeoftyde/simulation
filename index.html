<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<html>
<body onload="onload()">
<img src="IMG_8058.png" height="0" width="0" id="ref">
<img src="IMG_7996.png" height="0" width="0" id="refSP">
<div class="grass">
  <img id="phaser" src="Phase 1.png" class="phaser">
  <img id="spawnpoint" class="spawnpoint" src="IMG_7996.png">
  <img class="grassImg" id="grassImg" src="IMG_8056.png">
  <canvas class="testCan" id="testCan" >Your browser does not support the HTML canvas tag.</canvas>
  <canvas id="planetSize">Your browser does not support the HTML canvas tag.</canvas>
</div>
<div class="spaceBack"></div>
<textarea id="input" class="codeSpace" placeholder="Type 'Create World' to begin..."></textarea>
<style>
  .phaser {
    position: absolute;
    left: 0%;
    top: 0%;
    width: 40vh;
    height: 40vh;
    opacity: 1;
    z-index: 10;
  }
  .codeSpace {
    width: 100%;
    height: 30%;
    overflow: hidden;
    border-style: solid;
    border-color: white;
    border-width: 0.15vw;
    top: 70%;
    left: -0.15%;
    position: fixed;
    background-color: #0b0822;
    color: white;
    font-size: 2.5vw;
    font-family: AnkaCoder;
  }
  .spaceBack {
    background-image: url("IMG_8059.png");
    background-size: cover;
    background-position: 50%;
    width: 100%;
    height: 70%;
    top: 0;
    z-index: 0;
    left: 0;
    position: fixed;
  }
  .spawnpoint {
    width: 1vh;
    height: 1vh;
    position: fixed;
    z-index: 4;
  }
  .testCan {
    width: 200vh;
    height: 200vh;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 2;
  }
  .grassImg {
    width: 200vh;
    height: 200vh;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 3;
    opacity: 1;
  }
  .grass {
    width: 40vh;
    height: 40vh;
    position: fixed;
    left: 50%;
    top: 35%;
    clip-path: circle(50%);
    transform: translate(-50%, -50%);
    overflow: hidden;
    z-index: 1;
    background-color: white;
  }
  body {
    margin: 0;
    padding: 0;
    background-color: black;
  }
  #planetSize {
    position: absolute;
    left: 0%;
    top: 0%;
    width: 40vh;
    height: 40vh;
    opacity: 1;
  }
  @font-face {
    font-family: AnkaCoder;
    src: url("FiraCode-Regular.otf");
  }
</style>

<script>
  topA = Math.random() * -160;
  left = Math.random() * -160;
  document.getElementById("grassImg").style.top = topA / 100 * window.innerHeight + "px";
  document.getElementById("grassImg").style.left = left / 100 * window.innerHeight + "px";
  document.getElementById("grassImg").style.width = window.innerHeight * 2 + "px";
  document.getElementById("grassImg").style.height = window.innerHeight * 2 + "px";
  document.getElementById("testCan").style.top = topA / 100 * window.innerHeight + "px";
  document.getElementById("testCan").style.left = left / 100 * window.innerHeight + "px";
  document.getElementById("testCan").width = window.innerHeight * 2;
  document.getElementById("testCan").height = window.innerHeight * 2;
  document.getElementById("testCan").style.width = window.innerHeight * 2 + "px";
  document.getElementById("testCan").style.height = window.innerHeight * 2 + "px";
  document.getElementById("planetSize").style.width = window.innerHeight * 0.4 + "px";
  document.getElementById("planetSize").style.height = window.innerHeight * 0.4 + "px";
  document.getElementById("planetSize").width = window.innerHeight * 0.4;
  document.getElementById("planetSize").height = window.innerHeight * 0.4;
  window.addEventListener("resize", function() {
    document.getElementById("grassImg").style.top = topA / 100 * window.innerHeight + "px";
    document.getElementById("grassImg").style.left = left / 100 * window.innerHeight + "px";
    document.getElementById("grassImg").style.width = window.innerHeight * 2 + "px";
    document.getElementById("grassImg").style.height = window.innerHeight * 2 + "px";
    document.getElementById("testCan").style.top = topA / 100 * window.innerHeight + "px";
    document.getElementById("testCan").style.left = left / 100 * window.innerHeight + "px";
    document.getElementById("testCan").width = window.innerHeight * 2;
    document.getElementById("testCan").height = window.innerHeight * 2;
    document.getElementById("testCan").style.width = window.innerHeight * 2 + "px";
    document.getElementById("testCan").style.height = window.innerHeight * 2 + "px";
    document.getElementById("planetSize").style.width = window.innerHeight * 0.4 + "px";
    document.getElementById("planetSize").style.height = window.innerHeight * 0.4 + "px";
    document.getElementById("planetSize").width = window.innerHeight * 0.4;
    document.getElementById("planetSize").height = window.innerHeight * 0.4;
    ctx.drawImage(img, 0, 0, c.width, c.height);
    btx.drawImage(imgb, 0, 0, b.width, b.height);
  });
  c = document.getElementById("testCan");
  b = document.getElementById("planetSize");
  ctx = c.getContext("2d");
  btx = b.getContext("2d");
  img = document.getElementById("ref");
  imgb = document.getElementById("refSP");
  function onload() {
  ctx.drawImage(img, 0, 0, c.width, c.height);
  btx.drawImage(imgb, 0, 0, b.width, b.height);
  setTimeout(function() {
  alpha = 0;
  otp = false;
  while (alpha != 255 || otp == false) {
    rT = Math.round(Math.random() * 40);
    rL = Math.round(Math.random() * 40);
    totalTopOffset = Math.round((topA * -1 + rT) / 100 * window.innerHeight);
    totalLeftOffset = Math.round((left * -1 + rL) / 100 * window.innerHeight);
    alpha = 0;
    imgData = ctx.getImageData(totalLeftOffset, totalTopOffset, 4, 4)
    for (i = 0; i < 16; i++) {
      alpha += imgData.data[(4 * i) + 3];
      imgData.data[(4 * i) + 3] = 150;
    }
    alpha = alpha / 16;
    redImgData = btx.getImageData(rT / 100 * window.innerHeight, rL / 100 * window.innerHeight, 4, 4);
    alpha2 = 0;
    for (i = 0; i < 16; i++) {
      alpha2 += redImgData.data[(4 * i) + 3];
    }
    alpha2 = alpha2 / 16;
    if (alpha2 == 255) {
      otp = true;
    } else {
      otp = false;
    }
  }
  document.getElementById("spawnpoint").style.top = rT / 40 * 100 + "%";
  document.getElementById("spawnpoint").style.left = rL / 40 * 100 + "%";
  document.getElementById("planetSize").style.opacity = 0;
  }, 500);
  }
  originalCode = "";
  input = document.getElementById("input");
  input.addEventListener("keydown", function() {
  if (input.value < originalCode) {
    input.value = originalCode;
  }
  if (event.key === "Enter") {
    newCode = input.value.substring(originalCode.length);
    originalCode = input.value.concat("\n");
    if (newCode.toLowerCase() == "create world") {
      setTimeout(createWorld, 0);
    }
  }
  });
  function createWorld() {
    phaser = document.getElementById("phaser");
    for (i = 2; i < 25; i++) {
      if (i == 24) {
        setTimeout(function() {
        phaser.style.opacity = 0;
        phaser.style.zIndex = -400;
        }, 2200)
        break;
      }
      setTimeout(nextFrame, 0, i);
    }
  }
  function nextFrame(frame) {
    setTimeout(function() {
    phaser.src = "Phase ".concat(frame.toString(), ".png");
    }, (frame - 2) * 50);
  }
</script>
</body>
</html>
